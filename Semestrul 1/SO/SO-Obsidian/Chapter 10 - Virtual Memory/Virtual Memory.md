
- <span style="color:rgb(112, 48, 160)">Virtual memory</span> involves the separation of logical memory as perceived by developers from physical memory. This separation allows an <span style="color:rgb(112, 48, 160)">extremely large virtual memory </span>to be provided for programmers when only a smaller physical memory is available (<span style="color:rgb(112, 48, 160)">Figure 10.1</span>). Virtual memory makes the task of programming much easier, because the programmer no longer needs to worry about the amount of physical memory available.
- ![[Pasted image 20250214153247.png]]
- The <span style="color:rgb(112, 48, 160)">virtual address space </span>of a process refers to the logical (or virtual) view of how a process is stored in memory. Typically, this view is that a process begins at a certain logical address—say, address 0—and exists in contiguous memory, as shown in <span style="color:rgb(112, 48, 160)">Figure 10.2</span>.
- ![[Pasted image 20250214153712.png]]
- <span style="color:rgb(112, 48, 160)">Note</span> in <span style="color:rgb(112, 48, 160)">Figure 10.2</span> that we allow the heap to grow upward in memory as it is used for dynamic memory allocation. Similarly, we allow for the stack to grow downward in memory through successive function calls. The large blank space (or hole) between the heap and the stack is part of the virtual address space but will require actual physical pages only if the heap or stack grows. Virtual address spaces that include holes are known as <span style="color:rgb(112, 48, 160)">sparse</span> address spaces. Using a sparse address space is beneficial because the holes can be filled as the stack or heap segments grow or if we wish to dynamically link libraries (or possibly other shared objects) during program execution.

- In addition to separating logical memory from physical memory, virtual memory allows files and memory to be shared by two or more processes through page sharing ([[Shared Pages|Section 9.3.4]]). This leads to the following benefits:
	- System libraries such as the standard C library can be shared by several processes through mapping of the shared object into a virtual address space. Although each process considers the libraries to be part of its virtual address space, the actual pages where the libraries reside in physical memory are shared by all the processes (<span style="color:rgb(112, 48, 160)">Figure 10.3</span>). Typically, a library is mapped read-only into the space of each process that is linked with it. 
	- Similarly, processes can share memory. Recall from [[Chapter 3 - Processes]] that two or more processes can communicate through the use of [[IPC - Shared-Memory]]. <span style="color:rgb(112, 48, 160)">Virtual memory</span> allows one process to create a region of memory that it can share with another process. Processes sharing this region consider it part of their virtual address space, yet the actual physical pages of memory are shared, much as is illustrated in <span style="color:rgb(112, 48, 160)">Figure 10.3</span>.
	- ![[Pasted image 20250214154131.png]]
	- Pages can be shared during process creation with the `fork()` system call, thus speeding up process creation.

- We further explore these—and other—benefits of virtual memory later in this chapter. First, though, we discuss <span style="color:rgb(112, 48, 160)">implementing virtual memory </span>through [[Demand Paging]].